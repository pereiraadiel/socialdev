generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Sex {
  MALE
  FEMALE
}

model User {
  id         String   @id @default(nanoid())
  firstName  String
  lastName   String
  biography  String
  sex        Sex
  pictureURL String
  username   String   @unique
  password   String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  fans   Fanbase[] @relation("fans")
  heroes Fanbase[] @relation("heroes")
}

model Fanbase {
  heroId String
  fanId  String

  hero User @relation("fans", fields: [heroId], references: [id], map: "fanbase_heroId_fk")
  fan  User @relation("heroes", fields: [fanId], references: [id], map: "fanbase_fanId_fk")

  @@id([heroId, fanId])
}
